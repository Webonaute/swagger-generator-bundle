{% autoescape false %}
// Generated class BaseApi{{ tag|class_name }}
{% import '@draw_swagger_generator/angular-api/macro.ts.twig' as macro %}
// Generated class BaseApiUsers
import { AppHttp } from '../app-http.service';
import { Injector, Injectable } from '@angular/core';
import { Headers, RequestOptionsArgs, Response, URLSearchParams } from '@angular/http';

import { Observable } from 'rxjs/Observable';
import 'rxjs/add/operator/map';

import * as models from '../Model';

/* tslint:disable:no-unused-variable member-ordering */

export class BaseApi{{ tag|class_name }} {
    public defaultHeaders: Headers = new Headers();
    private appHttp: AppHttp;

    constructor(protected injector: Injector) {
        this.appHttp = this.injector.get(AppHttp);
    }

{% for path, pathItem in swagger.paths %}
{% for method, operation in pathItem.getOperations() %}
{% if tag in operation.tags %}
{% set operationParameter = operation|extract_operation_parameters(dsg.registry.ts.type_mapping) %}
    /**
     *
     *{{ macro.list_operation_params_doc(operation.parameters, dsg.registry.ts.type_mapping) }}
     *{% if method in ['post','put'] %} @param body{% endif %}{{ "" }}
     * @param extraHttpRequestParams
     */
    public {{ operation.operationId|camelize|camelizeDash|lcfirst }} ({{ macro.list_operation_params(operation.parameters, dsg.registry.ts.type_mapping) }}{% if method in ['post','put'] %}{{ "\n          " }}body?: {{ getModelByOperation(operation, 'models.', '{}') }},{% endif %}{{ "\n          " }}extraHttpRequestParams?: any ): Observable<{{ getModelByOperation(operation, 'models.', '{}') }}{% if operation|schema_type_of_operation( dsg.registry.ts.type_mapping) == "array" %}[]{% endif %}> {

        {{ macro.create_path(path, operation.parameters, dsg.registry.ts.type_mapping) }}

        const queryParameters = new URLSearchParams();
        const headerParams = this.defaultHeaders;

{{ macro.operation_params_require(operation.parameters, dsg.registry.ts.type_mapping, operation) }}

        const requestOptions: RequestOptionsArgs = {
            method: '{{ method|upper }}',
            headers: headerParams,
            search: queryParameters
        };
{% if method in ['post','put'] %}       requestOptions.body = body{% if getModelByOperation(operation, 'models.', '{}') != '{}' %}.serialize(){% endif %};{% endif %}{{ "" }}

        return this.appHttp.request(path, requestOptions)
            .map((response: Response) => {
{{ macro.handle_responses(operation) }}
            });
    }

{% endif %}
{% endfor %}
{% endfor %}
}




{% endautoescape %}